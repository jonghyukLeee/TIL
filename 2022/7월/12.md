# 오늘 배운점
## 스프링 시큐리티

- 소마 프로젝트에 적용하기 위해 스프링 시큐리티를 공부중이다.
이번 프로젝트에서는 JWT 토큰 방식을 적용할 생각이지만, 스프링 시큐리티의 기본 제공 방식인 세션 방식도 공부해볼 필요가 있다고 생각해서, 간단하게 나마 공부해 보았다.

### 세션
- 스프링 시큐리티의 세션 관리 전략

(계정당 허용되는 세션 개수를 1개라 가정)
1. 이전 사용자 세션 만료
-> 새로운 브라우저에서 사용자가 로그인 요청을 했을 때, 세션을 반환하면서 이전 사용자의 세션을 만료시킴. (default 전략)
2. 현재 사용자 인증 실패
-> 사용자 2가 로그인 요청을 했을 때, 사용자 1의 세션을 이미 보유중 이므로 인증 예외를 발생시킴. (maxSessionsPreventsLogin(true))

- 세션 고정 보호

-> 동일한 세션을 계속 사용할 경우, 공격자가 악용할 우려가 있으므로 요청마다 세션아이디를 변경하는 방식을 사용함.

### 권한설정

- 스프링 시큐리티는 선언적 방식과 동적 방식으로 요청에 대한 유저의 권한을 제한할 수 있다.

1. 선언적 방식

- URL : 관련된 설정 함수를 오버라이드 하여 자바 코드로 권한을 설정하는 방식.
- Method : 컨트롤러에 선언된 함수에 어노테이션을 통해 권한을 설정하는 방식.

2. 동적 방식 (DB 연동 프로그래밍)
- URL
- Method


### 권한 설정시 고려할 점

-> 권한 설정 시 구체적인 경로가 먼저 오고, 후에는 더 큰 범위의 경로가 오도록 해야한다.
  설정코드를 작성한 순서대로 인가처리가 적용되기 때문에, 더 큰 범위의 경로를 상위 순서에 적게되면 
  설계 의도에 맞지 않게 자신보다 상위 경로의 url에 접근할 수 있게 된다.
  
### CSRF(사이트 간 요청 위조)

- 스프링 시큐리티는 기본적으로 CsrfFilter를 제공한다.

- 모든 요청에 랜덤하게 생성된 토큰을 HTTP 파라미터로 요구

- 요청 시 전달되는 토큰 값과 서버에 저장된 실제 값과 비교한 후 일치하지 않으면 요청이 실패된다.

- http.csrf().disabled() 를 통해 비활성화 할 수 있음. (기본은 활성화 상태)

---
# 오늘 느낀점

## 팀 회의 (온라인) 
- 오늘도 어김없이 ERD 작성을 했는데, 당연하지만 DB 구조가 복잡해질 수록 너무 어렵고 제대로 설계하고 있는게 맞는건지 의문이 든다.. 확실히 실무 경험이 없다보니 같은 결과를 좀 더 효율적으로 조회할 수 있는 테이블 구조를 고민하는 과정에서 어떤 방식이 정답이냐에 대한 확신이 들지 않는다. 그냥 고민을 줄이고 직접 부딪혀 보기로 다짐했다 ^_____^

- 매일 애매하게 지각하는 팀원이 있는데, 기분이 나쁜건 아니지만 팀 내 규칙을 갖추고 각자의 책임감을 다지기 위해 언제 한번 얘기를 해야할 것 같다. 지각 패널티를 무엇으로 하는게 좋을 지 고민중이다,,

## 개인 공부
- 이번 프로젝트에서 코틀린을 쓰려고 공부하고 있었는데, 생각보다 분량이 많고 다른 공부에도 시간을 투자해야 했기 때문에 아쉽지만 포기했다. 관련 도서를 1회 완독한다 해도 꽤나 규모가 불고있는 현재 프로젝트에 적절하게 적용하고, 잘 활용할 수 있을지 의문이 들었다..ㅠ
개인이 아닌 팀 단위의 활동이니까 욕심을 조금 버리더라도 익숙한 언어를 사용해, 완성도 있는 결과물을 만들어볼 생각이다.

# 내일 할일
- 팀 멘토링 (온라인)
- 스프링 시큐리티 강의 및 코드작성 연습
- 이펙티브 자바