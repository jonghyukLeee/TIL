# 오늘 배운점

---

## AWS 네트워크 구성 복습

## VPC

- VPC는 클라우드의 네트워크 환경이다.
- 사용자가 정의한 격리된 가상의 네트워크 환경에서 AWS 리소스를 시작할 수 있다.
- AWS 리전 중 하나로 배포되고, 그 리전 내의 모든 가용영역에서 리소스를 호스트 할 수 있다.
- 다중 VPC의 이점
    - 워크로드의 논리적 격리
    - 보안강화
    - 어플리케이션의 모든 리소스환경을 제어해야하는 구조에 적합

## 서브넷

- VPC의 IP 주소범위
- 지정된 서브넷으로 AWS 리소스를 시작할 수 있다.
- 인터넷에 연결되어야 하는 리소스는 public subnet, 연결되지 않는 리소스는 private subnet을 사용.
- 기본값은 private
- 하나의 가용영역에 상주함

### 퍼블릭 서브넷

- 인터넷 게이트웨이로 향하는 라우팅 테이블과 연결
- 공인 IP 주소를 통해 인터넷과 통신
- 양방향 오픈

### 프라이빗 서브넷

- 간접적으로 인터넷 액세스
- 웹 인스턴스는 퍼블릭 서브넷에 배치된 로드밸런서 뒤쪽 프라이빗 서브넷에 배치하는것이 좋음.

## 인터넷 게이트웨이

- 수평 스케일링
- 이중화
- VPC 내의 인스턴스와 인터넷 통신을 제공

## 라우팅 테이블

- 네트워크 트래픽이 전달되는 위치를 결정하는데 사용되는 규칙 세트(경로) 를 포함한다.
- 기본적으로 VPC를 생성하면 기본 라우팅 테이블이 형성되는데, 이는 local로 설정된 단일경로를 허용함.
- VPC 내의 각 서브넷은 라우팅 테이블과 연결되어야 한다.
- 서브넷에 특정 라우팅 테이블을 명시하지 않는 경우, 기본 라우팅테이블(local) 이 연결된다.
- 서브넷은 한 번에 하나의 라우팅 테이블에 연결할 수 있지만, 하나의 라우팅 테이블에는 여러 개의 서브넷을 연결할 수 있다.

## 탄력적 IP주소

- 동적 클라우드 컴퓨팅을 위해 설계된 고정 공인 IPv4 주소
- 계정 내 어떤 VPC에 대해서든 인스턴스 또는 네트워크 인터페이스랑 연결할 수 있다.
- 주소를 VPC의 다른 인스턴스에 신속하게 매핑하여 장애 극복 가능
- 리전당 5개 제한

## 보안그룹

- 서브넷이 아닌 인스턴스 수준에서 동작
- 허용 규칙만 지원

## 도커 컴포즈

- 여러개의 컨테이너를 하나의 프로젝트로서 다룰 수 있는 작업 환경을 제공
- 여러 컨테이너의 옵션과 환경을 정의한 파일을 읽어 컨테이너를 순차적으로 생성
- 설정이 정의된 YAML 파일을 읽어 도커 엔진을 통해 컨테이너를 생성함

### 예시

```yaml
version: "3"
services:
  master:
    container_name: master
    image: jenkinsci/jenkins:2.150.1-slim
    ports:
      - 8080:8080
    volumes:
      - ./jenkins_home:/var/jenkinse_home
```

- version : YAML파일의 포맷버전
- services : 생성될 컨테이너들을 묶어놓은 단위. 서비스 항목 아래에는 각 컨테이너에 적용될 생성 옵션을 지정한다.
    - service 항목
        - image : 서비스의 컨테이너를 생성할 때 쓰일 이미지의 이름.
        - links : 다른 서비스에 서비스명만으로 접근할 수 있도록 설정
        - environment : 서비스의 컨테이너 내부에서 사용할 환경변수를 지정.
        - command : 컨테이너 실행될 때 수행할 명령어 설정
        - depends_on : 특정 컨테이너에 대한 의존관계를 나타냄. 이 항목에 명시된 컨테이너가 먼저 생성되고 실행됨.
        - ports : 서비스의 컨테이너를 개방할 포트를 설정. 
        그러나 단일 호스트 환경에서 특정 포트를 서비스 컨테이너에 연결하면 서비스의 컨테이너 수를 늘릴 수 없다.
        - build : dockerfile에서 이미지를 빌드해 서비스의 컨테이너를 생성하도록 설정
        - extends : 다른 YAML 파일이나 현재 파일에서 서비스 속성을 상속받게 설정
- volume : 볼륨설정

### 도커 컴포즈 명령어

- 정의된 모든 서비스 컨테이너를 한 번에 생성하고 실행 : docker-compose up , 반대는 down
- 실행은 하지않고 이미지를 가져오기만 함 : docker-compose pull
- 도커 컴포즈는 기본적으로 커맨드가 실행하는 디렉토리의 docker-compose.yml을 사용한다. 다른 이름이나 경로의 파일을 사용하고 싶다면 -f 옵션을 사용
- 검증 : docker-compose config
    - 기본적으로 현재 디렉토리의 docker-compose.yml 파일을 검사하지만,
    -f 옵션으로 경로를 설정할 수 있음

# 오늘 느낀점

---

- 뭐 하나 하려하면 새로 공부할게 늘어난다ㅠㅠㅠ 모르는게 너무 많은 탓인 것 같다. 공부량을 늘리자!
- 하루에 공부 환경을 계속 바꾸니까 왠지 효율이 늘었다.

# 내일 목표

---

- 팀회의
- 익스퍼트 미팅