# 오늘 배운점

---

## Authentication (인증) , Authorization (인가)

![1](https://user-images.githubusercontent.com/79312551/179411211-e61b299f-df9c-4a3d-9e64-290ff0670efb.png)

- 스프링 시큐리티는 인증, 인가 영역을 나누어 관리함.

### 스프링 시큐리티가 지원하는 권한 계층

![2](https://user-images.githubusercontent.com/79312551/179411215-e27e58de-bb62-427b-b7bd-0622d51081b3.png)

## FilterSecurityInterceptor

![3](https://user-images.githubusercontent.com/79312551/179411218-f2152222-4511-4de0-944e-afaf0347a95c.png)

- 실질적인 권한 처리는 AccessDecisionManager(최종 심의 결정자)

### 절차

![4](https://user-images.githubusercontent.com/79312551/179411221-29b03dc1-1065-4a68-94a1-10e8fe846385.png)

- 인증 객체인지 체크
- 요청한 리소스에 필요한 권한 정보를받아옴
- 권한에 대한 요청자의 적합성 판단
- 접근 허용

## AccessDecisionManager

- FilterSecurityInterceptor로 부터 인증 정보, 요청 정보, 권한 정보를 전달 받아서 자원 접근을 허용할지 여부를 최종 결정하는 주체

## AccessDecisionVoter

![5](https://user-images.githubusercontent.com/79312551/179411228-7014ed04-c303-46b0-9dc1-a6d10fd15b0e.png)

## 주요 아키텍쳐 총 정리

![6](https://user-images.githubusercontent.com/79312551/179411230-c19550f9-28b0-4ebe-a9bf-883d21b9f43e.png)

- 위 그림 속 흐름을 어느정도 스스로 정리할 수 있을 정도로 학습하기!

[사진 출처] ****스프링 시큐리티 - Spring Boot 기반으로 개발하는 Spring Security - 정수원 (인프런)****

# 이펙티브 자바

## 2장. 객체의 생성과 파괴

---

**객체를 만들어야 할 때와 만들지 말아야 할 때를 구분하는 법, 올바른 객체 생성 방법과 불필요한 생성을 피하는 법, 제때 파괴됨을 보장하고 파괴 전에 수행해야 할 정리 작업을 관리하는 요령을 알아본다.**

### 생성자 대신 정적 팩터리 메서드를 고려하라.

- 클래스는 생성자와 별도로 정적 팩터리 메서드(static factory method)를 제공할 수 있다.
    - 디자인 패턴에서의 팩터리 메서드와는 다른거다
- 장점
    1. 이름을 가질 수 있다. 
        
        → 생성자는 객체의 특성을 설명할 수 없지만, 정적 팩터리 메서드는 이름만 잘 지으면 반환될 객체의 특성을 쉽게 묘사할 수 있다.
        
    2. 호출될 때 마다 인스턴스를 새로 생성하지 않아도 된다.
    3. 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다.
        
        → 반환할 객체의 클래스를 자유롭게 선택할 수 있게 하는 유연성을 제공함.
        
    4. 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다.
        
        → 클라이언트는 팩터리가 건네주는 객체가 어느 클래스의 인스턴스인지 알 수도 없고 알 필요도 없다.
        
    5. 정적 팩터리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다.
- 단점
    1. 상속을 하려면 public이나 protected 생성자가 필요하니, 정적 팩토리 메서드만 제공하면 하위 클래스를 만들 수 없다.
        
        → 상속보다 컴포지션, 불변타입 등으로 장점으로 승화 가능
        
    2. 정적 팩터리 메서드는 프로그래머가 찾기 어렵다.
        
        → 생성자처럼 API 설명에 명확히 드러나지 않아, 문서 작성과 규약을 지키는 등으로 해결해야 함.
        

### 정리

정적 팩터리 메서드와 public 생성자는 각자의 쓰임새가 있으니 상대적인 장단점을 이해하고 사용하는 것이 좋다. 하지만 일반적으로 정적 팩터리 메서드가 유리한 상황이 더 많으므로 무작정 public 생성자를 제공하던 습관이 있다면 고칠 필요가 있다.

### 생성자에 매개변수가 많다면 빌더를 고려하라

- 정적 팩터리 메서드와 생성자 모두 선택적 매개변수가 많을때는 적절히 대응하기 어렵다.
    - 점층적 생성자 패턴 : 선택 매개변수를 점점 늘려가며 생성자까지 늘려가는 방식
        - 확장하기 어렵다
        - 각 값의 의미를 파악하기 힘들다
        - 읽기 어렵다
    - 자바빈즈 패턴 : 매개변수가 없는 생성자로 객체를 만든 후, setter를 통해 값을 설정하는 방식
        - 객체 하나를 만들기 위해 메서드를 여러 개 호출해야함
        - 객체가 완성되기 전까지는 일관성이 무너진 상태에 놓이게 됨
        - 불변 클래스로 만들 수 없다
- 점층적 생성자 패턴의 안정성과 자바빈즈 패턴의 가독성을 겸비한 빌더 패턴을 도입하면 위 단점들을 극복할 수 있다.
- 빌더는 생성할 클래스 안에 정적 멤버 클래스로 만들어 두는게 보통이다.(불변)

### 정리

- 생성자나 정적 팩터리가 처리해야 할 매개변수가 많다면 빌더 패턴을 선택하는게 낫다.

# 오늘 느낀점

---

### 팀 회의

- 내일 팀 회의가 예정되어 있었는데, 오늘 오후 11시에 파토났다. 동일한 목표를 좇더라도 각자 속도를 내는 방식이 다르기 때문에 최대한 이해하면서 가려고 했는데, 오늘은 조금 기분이 좋지 않았다. 열정이나 실력의 차이는 있을 수 있어도 시간 약속이나 노력으로 극복 가능한 부분은 서로를 위해 조금 신경써줬으면 하는 바램이었는데, 오늘 일로 팀 활동에 조금 미련을 버릴 수 있었던 것 같다.
앞으로는 개인 성장에 많은 힘을 쏟을 생각이다! 나만 열심히 하면 방법이 무엇이든 충분한 결과를 얻을 수 있다고 생각한다. 정신 바짝 차려야지~.~

### 이펙티브 자바

- 코틀린을 쓰려했던 내 자신이 한심했다. ㅋㅋㅋㅋㅋ 이 책을 읽으니 자바도 아직 너무나 어렵다….. 코틀린은 토이 프로젝트에만 가볍게 적용해 보고, 이번 소마 과정을 통해 자바만큼은 꼭 어디가서 당당하게 주력이라고 밝힐 수 있는 실력을 만들고 수료하고 싶어졌다.
- 3장까지 하려했는데.. 3장은 무슨 2장도 다 못끝냈다 ㅎㅎㅎㅎ 본 책은 하루 목표를 조금 낮게 잡아야겠다..

# 내일 목표

---

- ExceptionTranslationFilter , FilterSecurityInterceptor 추가공부
- 시큐리티 강의 실습 파트에 들을만한 부분 있는지 확인하기 (개념은 완강!)
- 이펙티브 자바 2장
